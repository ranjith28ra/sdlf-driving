<!DOCTYPE html>
<html>
<head>
  <title>ESP32 Vehicle Navigation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY"></script>
  <style>
    body { font-family: sans-serif; margin: 0; }
    #map { height: 90vh; width: 100%; }
    h3 { margin: 10px; }
  </style>
</head>
<body>
  <h3>Click the map to send a GPS target to the ESP32 car</h3>
  <div id="map"></div>
  <script>
    let map;
    let marker;

    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 37.7749, lng: -122.4194 }, // Default center
        zoom: 16
      });

      map.addListener("click", function(event) {
        const lat = event.latLng.lat();
        const lng = event.latLng.lng();

        if (marker) marker.setMap(null);
        marker = new google.maps.Marker({
          position: { lat, lng },
          map: map,
          title: "Target Location"
        });

        // Replace with your ESP32 IP address
        fetch(`http://192.168.4.1/target?lat=${lat}&lng=${lng}`)
          .then(res => alert("Destination sent to ESP32!"))
          .catch(err => alert("Failed to reach ESP32"));
      });
    }

    window.onload = initMap;
  </script>
</body>
</html>
