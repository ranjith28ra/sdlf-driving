<!DOCTYPE html>
<html>
  <head>
    <title>Tap to Set Destination</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY"></script>
    <style>
      #map {
        height: 90vh;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <h3>Click on the map to set destination point</h3>
    <div id="map"></div>

    <script>
      // Firebase configuration
      const firebaseConfig = {
        apiKey: "YOUR_FIREBASE_API_KEY",
        authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
        databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com",
        projectId: "YOUR_PROJECT_ID",
        storageBucket: "YOUR_PROJECT_ID.appspot.com",
        messagingSenderId: "YOUR_SENDER_ID",
        appId: "YOUR_APP_ID"
      };
      firebase.initializeApp(firebaseConfig);
      const db = firebase.database();

      // Initialize the Google Map
      function initMap() {
        const initialLocation = { lat: 12.9716, lng: 77.5946 }; // Bengaluru default
        const map = new google.maps.Map(document.getElementById("map"), {
          zoom: 15,
          center: initialLocation,
        });

        let marker = new google.maps.Marker({ map: map });

        // On map click, place marker and update Firebase
        map.addListener("click", (e) => {
          const lat = e.latLng.lat();
          const lng = e.latLng.lng();

          marker.setPosition({ lat, lng });

          db.ref("/destination").set({
            lat: lat,
            lon: lng
          });

          alert(`Destination set to:\nLat: ${lat}\nLon: ${lng}`);
        });
      }

      window.onload = initMap;
    </script>
  </body>
</html>
